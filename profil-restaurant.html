<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Slikoo - Détails sur votre restaurant</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Noto+Sans:100,200,300,400,500,600,700,800"
      rel="stylesheet"
    />
    <link rel="stylesheet" type="text/css" href="styles/style.css" />
  </head>
  <body>
    <div id="constraintFixed" class="constraint-fixed">
      <div class="details-background">
        <div class="overlay-background">
          <div class="container-fluid container-md">
            <div class="right-section">
              <div class="signup-div">
                <div class="text-center">
                  <h3>Détails sur votre restaurant</h3>
                  <p class="text-secondary p-text">
                    Lorem ipsum odor amet, consectetuer adipiscing elit. Donec
                    lacinia gravida interdum et sodales, tempor curae mus.
                  </p>
                </div>
                <div id="signupFormParticulier" class="signup-form">
                  <form>
                    <!-- Section 1 -->
                    <div class="my-3 section" data-section-id="1">
                      <h5>Proposez-vous des options pour les régimes alimentaires suivants ?</h5>
                      <div class="d-flex flex-row flex-wrap">
                        <div class="checkbox-slikoo">
                          <input type="checkbox" id="OptionVegetarien" name="optionsAlimentaires" value="Végétarien" onchange="toggleBackground(this)" />
                          <label for="OptionVegetarien">Végétarien</label>
                        </div>
                        <div class="checkbox-slikoo">
                          <input type="checkbox" id="OptionVegane" name="optionsAlimentaires" value="Végane" onchange="toggleBackground(this)" />
                          <label for="OptionVegane">Végane</label>
                        </div>
                        <div class="checkbox-slikoo">
                          <input type="checkbox" id="OptionSansGluten" name="optionsAlimentaires" value="Sans gluten" onchange="toggleBackground(this)" />
                          <label for="OptionSansGluten">Sans gluten</label>
                        </div>
                        <div class="checkbox-slikoo">
                          <input type="checkbox" id="OptionSansLactose" name="optionsAlimentaires" value="Sans lactose" onchange="toggleBackground(this)" />
                          <label for="OptionSansLactose">Sans lactose</label>
                        </div>
                        <div class="checkbox-slikoo">
                          <input type="checkbox" id="OptionAucune" name="optionsAlimentaires" value="Aucune" onchange="toggleBackground(this)" />
                          <label for="OptionAucune">Non, nous ne proposons pas d'options pour ces régimes</label>
                        </div>
                      </div>
                    </div>
                    <!-- Section 2 -->
                    <div class="my-3 section" data-section-id="2">
                      <h5>Quelle est votre marge de prix par personne ?</h5>
                      <div class="d-flex flex-row flex-wrap">
                        <div class="checkbox-slikoo">
                          <input type="radio" id="Budget1" name="budget" value="0-25" onchange="toggleRadioBackground(this)" />
                          <label for="Budget1">0-25€</label>
                        </div>
                        <div class="checkbox-slikoo">
                          <input type="radio" id="Budget2" name="budget" value="25-50" onchange="toggleRadioBackground(this)" />
                          <label for="Budget2">25-50€</label>
                        </div>
                        <div class="checkbox-slikoo">
                          <input type="radio" id="Budget3" name="budget" value="+50" onchange="toggleRadioBackground(this)" />
                          <label for="Budget3">+50€</label>
                        </div>
                      </div>
                    </div>
                    <!-- Section 3 -->
                    <div class="my-3 section" data-section-id="3">
                      <h5>Est-ce que l'établissement est accessible aux personnes à mobilité réduite ?</h5>
                      <div class="d-flex flex-row flex-wrap">
                        <div class="checkbox-slikoo">
                          <input type="radio" id="AccessibiliteOui" name="accessibilite" value="Oui" onchange="toggleRadioBackground(this)" />
                          <label for="AccessibiliteOui">Oui</label>
                        </div>
                        <div class="checkbox-slikoo">
                          <input type="radio" id="AccessibiliteNon" name="accessibilite" value="Non" onchange="toggleRadioBackground(this)" />
                          <label for="AccessibiliteNon">Non</label>
                        </div>
                      </div>
                    </div>
                    <button id="buttonSubmit" type="submit" class="slikoo-button">
                      Confirmer
                    </button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Progress Bar Div -->
        <div id="progressBar" class="progress-bar-div">
          <span class="progress-bar-span">0%</span>
          <svg
            width="100"
            height="100"
            viewBox="0 0 100 100"
            class="circular-progress"
          >
            <circle class="bg" cx="50" cy="50" r="45"></circle>
            <circle class="fg" cx="50" cy="50" r="45"></circle>
          </svg>
        </div>
      </div>
    </div>

    <!-- JAVASCRIPT FILES -->
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // Toggle background for checkboxes
        function toggleBackground(checkbox) {
          const container = checkbox.parentElement;
          if (checkbox.checked) {
            container.classList.add('checked');
          } else {
            container.classList.remove('checked');
          }
        }

        // Toggle background for radio buttons
        function toggleRadioBackground(radio) {
          // Get all radio buttons with the same name
          const allRadios = document.querySelectorAll(`input[name="${radio.name}"]`);

          // Loop through all radios and remove the 'checked' class from their containers
          allRadios.forEach((r) => {
            const container = r.parentElement;
            container.classList.remove('checked');
          });

          // Add the 'checked' class to the container of the selected radio
          const selectedContainer = radio.parentElement;
          if (radio.checked) {
            selectedContainer.classList.add('checked');
          }
        }

        // Progress Bar and Form Completion Tracking
        const formCompletion = {
          totalSections: 3,
          sectionsCompleted: {
            optionsAlimentaires: false,
            budget: false,
            accessibilite: false,
          },
        };

        // Function to update the progress bar
        function updateProgressBar() {
          const completedSections = Object.values(formCompletion.sectionsCompleted).filter(
            Boolean
          ).length;
          const percentage = Math.round(
            (completedSections / formCompletion.totalSections) * 100
          );

          // Update the CSS variable --progress on the .circular-progress element
          const circularProgress = document.querySelector('.circular-progress');
          if (circularProgress) {
            circularProgress.style.setProperty('--progress', percentage);
          }

          // Update the percentage text
          const progressBarSpan = document.querySelector('.progress-bar-span');
          if (progressBarSpan) {
            progressBarSpan.textContent = percentage + '%';
          }
        }

        // Check 'optionsAlimentaires' section
        function checkOptionsAlimentaires() {
          const checkboxes = document.querySelectorAll('input[name="optionsAlimentaires"]');
          const isChecked = Array.from(checkboxes).some((checkbox) => checkbox.checked);
          formCompletion.sectionsCompleted.optionsAlimentaires = isChecked;
          updateProgressBar();
        }

        const optionsAlimentairesCheckboxes = document.querySelectorAll('input[name="optionsAlimentaires"]');
        optionsAlimentairesCheckboxes.forEach((checkbox) => {
          checkbox.addEventListener('change', () => {
            toggleBackground(checkbox);
            checkOptionsAlimentaires();
          });
        });

        // Function to add radio button listeners and check section
        function addRadioListeners(name) {
          const radios = document.querySelectorAll(`input[name="${name}"]`);
          radios.forEach((radio) => {
            radio.addEventListener('change', () => {
              toggleRadioBackground(radio);
              checkSection(name);
            });
          });
        }

        function checkSection(name) {
          const radios = document.querySelectorAll(`input[name="${name}"]`);
          const isChecked = Array.from(radios).some((radio) => radio.checked);
          formCompletion.sectionsCompleted[name] = isChecked;
          updateProgressBar();
        }

        // Add listeners and initial checks for radio button sections
        const radioSectionNames = [
          'budget',
          'accessibilite',
        ];

        radioSectionNames.forEach((name) => {
          addRadioListeners(name);
          checkSection(name);
        });

        // Initial check for optionsAlimentaires
        checkOptionsAlimentaires();

        // Initial update of the progress bar
        updateProgressBar();
      });
    </script>
  </body>
</html>
